# Spring RSocket Client Getting Started

RSocket Client to send request-response messages to the RSocket Server

## Description

## Demo
### Dependency
- `spring-boot-starter-rsocket`
- `spring-shell-starter:2.0.1.RELEASE`

```
dependencies {
	implementation("org.springframework.boot:spring-boot-starter-rsocket")
	implementation("org.springframework.shell:spring-shell-starter:2.0.1.RELEASE")
}
```

### Spring Shell
Users of the Spring Shell project can easily build a full featured shell application by depending on the Spring Shell jars and adding their own commands (which come as methods on spring beans). 

##### `@ShellComponent`
a variation of @Component that is used to restrict the set of classes that are scanned for candidate commands

##### `@ShellMethod`
@ShellMethod annotation over the method signature to activate Spring Shell and declare the help text that users will see if they type help

##### Removing Test
- [Remove the sample integration test](https://docs.spring.io/spring-shell/docs/current-SNAPSHOT/reference/htmlsingle/#_adding_a_dependency_on_spring_shell)

Given that Spring Shell will kick in and start the REPL by virtue of this dependency being present, you’ll need to either build skipping tests (-DskipTests) throughout this tutorial or remove the sample integration test that was generated by start.spring.io. If you don’t do so, the integration test will create the Spring ApplicationContext and, depending on your build tool, will stay stuck in the eval loop or crash with a NPE.

##### Run Spring Shell for RSocket Client
Run the RSocket Server before run the client
```
$ java -jar build/libs/spring-rsocket-server-gs-0.0.1-SNAPSHOT.jar
```

Run the RSocket Client
```
$ ./gradlew clean build
$ ava -jar build/libs/spring-rsocket-cliend-gs-0.0.1-SNAPSHOT.jar
```
```
shell:>request-response
24-04-2020 06:45:07.083 [main           ] INFO  c.g.shinyay.client.RSocketShellClient    - Sending one request. Waiting for one response...
24-04-2020 06:45:07.384 [main           ] INFO  c.g.shinyay.client.RSocketShellClient    - Response was: Message(origin=Server, interaction=Response, index=0, created=1587678307)
```

### RSocket Client
#### Request-Response
```
fun requestResponse(): Unit {
	val message = this.rsocketRequester
			?.route("request-response")
			?.data(Message(client, request))
			?.retrieveMono(Message::class.java)
			?.block()
	logger.info("Response was: $message")
}
```
#### Fire-and-Forget
```
fun fineAndForget(): Unit {s
	this.rsocketRequester
			?.route("fire-and-forget")
			?.data(Message(client, fireAndForget))
			?.send()
			?.block()
}
```
#### Request-Stream
```
fun stream(): Unit {
	this.disposable = this.rsocketRequester
			?.route("stream")
			?.data(Message(client, stream))
			?.retrieveFlux(Message::class.java)
			?.subscribe { it -> logger.info("Response received: $it") }!!
}
```
#### Channel

## Features

- feature:1
- feature:2

## Requirement

## Usage

## Installation

## Licence

Released under the [MIT license](https://gist.githubusercontent.com/shinyay/56e54ee4c0e22db8211e05e70a63247e/raw/34c6fdd50d54aa8e23560c296424aeb61599aa71/LICENSE)

## Author

[shinyay](https://github.com/shinyay)
